name: TEST - Manual Approval on PR (Environment)

on:
  pull_request:
    types: [closed]
    branches:
      - dev

jobs:
  deploy-simulated:
    name: Deploy (simulado)
    if: ${{ github.event.pull_request.merged == true }}
    runs-on: ubuntu-latest
    steps:
      - name: Deploy simulation
        run: |
          echo "âœ… Deploy simulado iniciando..."
          sleep 8
          echo "âœ… Deploy simulado finalizado."

  migration-simulated:
    name: Migration (simulado) - requer aprovaÃ§Ã£o
    needs: deploy-simulated
    runs-on: ubuntu-latest
    environment: migration-test
    steps:
      - name: Migration simulation
        run: |
          echo "ðŸš€ Migration simulado iniciando... teste"
          sleep 8
          echo "âœ… Migration simulado finalizado.g"
